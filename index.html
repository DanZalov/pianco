<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pianco online</title>
<meta name="description" content="
	Virtual piano - with multiplayer.
	Play just for fun on your touch screen, try to cooperate with your friends, or connect your real piano via MIDI and share your skill with others." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎹</text></svg>">
<!-- fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap">
<!-- Sentry -->
<script src="https://js.sentry-cdn.com/4f3d05f95bea47cdbf66d235f657fa30.min.js" crossorigin></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-21351225-3"></script>
<script>
  window.dataLayer = window.dataLayer || []
  function gtag(){dataLayer.push(arguments)}
  gtag('js', new Date())
	gtag('config', 'UA-21351225-3')
</script>
<script>
	if ('serviceWorker' in window.navigator && location.protocol === 'https:') {
		window.navigator.serviceWorker.register('/service-worker.js')
	}
</script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-tippy/dist/vue-tippy.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@5.9.55/css/materialdesignicons.min.css">
<link rel="stylesheet" href="/css/main.css" />
<script type="module" src="js/main.js"></script>
</head>
<body id="app">
	<div class="background">
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
		<div class="smoke"></div>
	</div>
	<header class="bar">
		<div>
			<h1 id="logo">Pianco</h1>
		</div>
		<div>
			<div>
				<button id="toggle-score" title="show staff" >
					<span class="mdi mdi-music-clef-treble"></span>
				</button>
				<button id="toggle-qwerty" hidden  title="show kayboard mapping">
					<span class="mdi mdi-keyboard-outline"></span>
				</button>
				<button id="toggle-labels" title="show note labels">
					<span class="mdi mdi-label-outline"></span>
				</button>
				<button id="toggle-velocity" title="show velocity">
					<span class="mdi mdi-glass-stange"></span>
				</button>
			</div>
			<div>
				<button id="toggle-cinema"  title="cinema mode">
					<span class="mdi mdi-television-clean"></span>
				</button>
			</div>
		</div>
	</header>
	<div class="content">
		<div class="chat-sidebar"></div>
		<div class="main-content">
			<div class="info-row"> <!-- info row  -->
				<div class="staff-paper">
					<div class="staffs">
						<div class="staff treble" hidden>
							<span><i>𝄞</i>𝄚𝄚𝄚𝄚𝄚𝄚𝄚𝄚𝄚</span>
							<span>𝅗</span>
						</div>
						<div class="staff bass" hidden>
							<span><i>𝄢</i>𝄚𝄚𝄚𝄚𝄚𝄚𝄚𝄚𝄚</span>
							<span>𝅗</span>
						</div>
					</div>
				</div>
			</div> <!-- end info row -->
			<div class="keyboard letters"> <!-- piano row -->
				<div class="pianoroll"></div>
				<div class="top-keys"></div>
				<div class="bottom-keys"></div>
				<div class="hint" hidden>
					<button data-note="C">A</button>
					<button data-note="C#">W</button>
					<button data-note="D">S</button>
					<button data-note="D#">E</button>
					<button data-note="E">D</button>
					<button data-note="F">F</button>
					<button data-note="F#">T</button>
					<button data-note="G">G</button>
					<button data-note="G#">Y</button>
					<button data-note="A">H</button>
					<button data-note="A#">U</button>
					<button data-note="B">J</button>
					<button data-note="C">K</button>
					<button data-note="C#">O</button>
					<button data-note="D">L</button>
					<button data-note="D#">P</button>
					<button data-note="E">;</button>
					<button data-note="F">'</button>
				</div>
			</div> <!-- end piano row -->
			<div class="bar tool-bar"> <!-- tool bar row -->
				<div>
					<button id="midi" title="MIDI in">
						<span class="mdi mdi-midi"></span>
					</button>
					<label for="instrument" id="instrument-label" title="output voice">
						<span id="out-icon" class="mdi mdi-dots-horizontal"></span>
						<select name="instrument" id="instrument" hidden>
							<option value="sampledPiano"> piano</option>
							<option value="polySynth" class="mid mid-waveform"> synth</option>
							<option value="midiout" hidden>MIDI out</option>
							<option value="none" selected hidden>...</option>
							<!-- <option value="AMSynth">AM synth</option>
							<option value="FMSynth">FM synt</option> -->
						</select>
					</label>
					<label id="volume-label" title="volume">
						<span id="volume-icon" class="mdi mdi-volume-high"></span>
						<input id="volume" type="range" min="-40" value="0" max="0" step="2.5" />
					</label>
				</div>
		
				<div>
					<button id="go-down" title="shift left"><span class="mdi mdi-chevron-left"></span></button>
					<button id="go-mid" title="shift to middle"><span class="mdi mdi-chevron-up"></span></button>
					<button id="go-up" title="shift right"><span class="mdi mdi-chevron-right"></span></button>
				</div>
		
				<div v id="recorder-app" v-cloak>
					<div
						:class="{ isRecording, isPlaying }"
					>
						<button @click="toggleRecord"
							v-tippy :content="(isRecording || isPlaying) ? 'stop' : 'record'"
						>
							<span v-if="!isRecording && !isPlaying" class="mdi mdi-record"></span>
							<span v-if="isRecording || isPlaying" class="mdi mdi-stop"></span>
						</button>
						<button @click="togglePlay"
							v-tippy :content="!isPlaying ? 'replay' : 'pause'"
						>
							<span v-if="!isPlaying" class="mdi mdi-play"></span>
							<span v-if="isPlaying" class="mdi mdi-pause"></span>
						</button>
					</div>
				</div>
			</div> <!-- end toolbar row -->
		</div>
	</div>
	<footer class="bar" id="networking-app" v-cloak>
		<div>
			<div class="reacter" v-if="showReacter">
				<span
					v-for="(label, symbol) of {
						'❤️': 'lovely',
						'👏🏻': 'bravo!',
						'👍🏻': 'good',
						'👌🏻': 'okay',
						'👎🏻': 'bad',
						'🍅': 'boo!',
					}"
					:content="label"
					v-tippy="{ placement : 'right',  arrow: true }"
					tabindex="-1"
					:disabled="!!reactions[uid]"
					@click="react(symbol)"
				>
					{{symbol}}
				</span>
			</div>
			<div>
				<button content="react!" v-tippy @click="toggleReacter()">
					<span class="mdi mdi-chat"></span>
				</button>
			</div>
			<div>
				<button v-if="!isOnline" content="disconnected" v-tippy>
					<span v-if="!isOnline" class="mdi mdi-close-network"></span>
				</button>
				<label
					v-if="isOnline"
					v-for="u of users"
					@click="userClick(u)"
					:content="userName(u)" v-tippy
				>
					<span
						:data-uid="u"
						:style="{'--color': userColor(u)}"
						:class="`mdi mdi-account${u===uid ? '-settings' : isMuted(u) ? '-cancel' : !u ? '-tie' : ''} user-icon`"
					></span>
					<span v-if="reactions[u]" class="reaction">{{reactions[u]}}</span>
				</label>
			</div>
		</div>
		<div class="tabs">
			<button
				v-for="room of [0,1,2,3]"
				@click="changeRoom(room)"
				:class="gid === room ? 'on' : ''"
				v-tippy :content="`room ${room}`"
				:data-user-dots="dotsOfRoom(room)"
			>
				<span :class="`mdi mdi-numeric-${ room }-circle`"></span>
			</button>
			<button
				:class="gid === -1 ? 'on' : ''"
				v-tippy content="isolation"
				@click="changeRoom(-1)"
			>
				<span class="mdi mdi-minus-circle"></span>
			</button>
		</div>
		<div>
			<span class="copy">
				&copy; <a href="https://draho.cz/" rel="me">draho.cz</a>
				<!-- &ensp;|&ensp; 
				<a href="#about">about</a>
			</span> -->
		</div>
	</footer>
	<div class="cinema-bar">
		<button id="fullscreen" class="mdi mdi-fullscreen" title="toggle fullscreen" data-placement="bottom"></button>
		<button id="cinema-off" class="mdi mdi-close" title="close cinema mode" data-placement="bottom"></button>
	</div>
</body>
</html>
